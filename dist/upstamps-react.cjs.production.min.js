"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("tslib"),n=require("react"),r=(e=n)&&"object"==typeof e&&"default"in e?e.default:e,s=n.createContext({});exports.Flag=function(e){var t=e.children,a=e.name;return-1!==n.useContext(s).state.flags.indexOf(a)?r.createElement(n.Fragment,null,t):null},exports.UpStampsContext=s,exports.UpStampsProvider=function(e){var a=e.children,i=e.clientId,u=e.envKey,o=e.projectKey,c=n.useState({loading:!0,error:!1,flags:[],params:{clientId:i,envKey:u,projectKey:o}}),l=c[0],f=c[1],g=n.useState({state:l,dispatch:f}),p=g[0],d=g[1];return n.useEffect((function(){t.__awaiter(void 0,void 0,void 0,(function(){var e,n;return t.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),l.flags.length>0?[2]:[4,fetch("https://services.upstamps.com/api/"+i+"/"+o+"/"+u)];case 1:return[4,r.sent().json()];case 2:return e=r.sent().flags,n=e.map((function(e){return e.name})),f((function(e){return t.__assign(t.__assign({},e),{flags:n,loading:!1})})),[3,4];case 3:return r.sent(),f((function(e){return t.__assign(t.__assign({},e),{error:!0,loading:!1})})),[3,4];case 4:return[2]}}))}))}),[l.flags]),n.useEffect((function(){d(t.__assign(t.__assign({},p),{state:l}))}),[l]),r.createElement(s.Provider,{value:p},a)},exports.useFlag=function(e){return{show:-1!==n.useContext(s).state.flags.indexOf(e)}};
//# sourceMappingURL=upstamps-react.cjs.production.min.js.map
