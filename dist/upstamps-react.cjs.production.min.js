"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("tslib"),r=require("react"),n=(e=r)&&"object"==typeof e&&"default"in e?e.default:e,a=r.createContext({}),s=function(e,r){switch(r.type){case"set-flags":return t.__assign(t.__assign({},e),r.payload);default:throw new Error("Unhandled action type: "+r.type)}},o=function(){var e=r.useContext(a);if(void 0===e)throw new Error("UpStampsContext must be used with UpStampsProvider!");return e};exports.Flag=function(e){var t=e.children,a=e.name,s=o().state;return r.useMemo((function(){return-1!==s.flags.indexOf(a)}),[s.flags])?n.createElement(r.Fragment,null,t):null},exports.UpStampsContext=a,exports.UpStampsProvider=function(e){var o=e.children,u=e.clientId,i=e.envKey,l=e.projectKey,c=r.useReducer(s,{loading:!0,error:!1,flags:[],params:{clientId:u,envKey:i,projectKey:l}}),f=c[0],p=c[1],d=r.useMemo((function(){return{state:f,dispatch:p}}),[f,p]);return r.useEffect((function(){var e=!1;return t.__awaiter(void 0,void 0,void 0,(function(){var r,n;return t.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),f.flags.length>0?[2]:[4,fetch("https://services.upstamps.com/api/flags/"+u+"/"+l+"/"+i)];case 1:return[4,t.sent().json()];case 2:return r=t.sent().flags,n=r.map((function(e){return e.name})),e||p({type:"set-flags",payload:{flags:n,loading:!1}}),[3,4];case 3:return t.sent(),p({type:"set-flags",payload:{flags:[],loading:!1,error:!0}}),[3,4];case 4:return[2]}}))})),function(){e=!0}}),[f.flags,u,i,l]),n.createElement(a.Provider,{value:d},o)},exports.useFlag=function(e){var t=o().state,n=r.useMemo((function(){return t.flags}),[t.flags]);return console.log("Render"),{show:-1!==n.indexOf(e)}};
//# sourceMappingURL=upstamps-react.cjs.production.min.js.map
