{"version":3,"file":"upstamps-react-sdk.cjs.production.min.js","sources":["../src/Context.tsx","../src/Flag.tsx","../src/useFlag.tsx"],"sourcesContent":["import React, { useState, createContext, useEffect } from \"react\";\n\nexport interface UpStampsConfigParams {\n  clientId: string;\n  stage: string;\n  projectId: string;\n}\n\nexport interface UpStampsState {\n  name: string;\n  flags: Array<string>;\n  params: UpStampsConfigParams;\n}\n\nexport interface UpStampsContextState {\n  state: UpStampsState;\n}\n\nexport interface UpStampsProviderProps extends UpStampsConfigParams {\n  children: React.ReactNode;\n}\n\nexport const UpStampsContext = createContext<UpStampsContextState>(\n  {} as UpStampsContextState\n);\n\nexport const UpStampsProvider: React.FC<UpStampsProviderProps> = ({\n  children,\n  clientId,\n  stage,\n  projectId,\n}) => {\n  const params = {\n    clientId,\n    stage,\n    projectId,\n  };\n\n  const [state, dispatch] = useState({\n    name: \"Johhn\",\n    flags: [\"car\", \"chat\", \"profile\", \"drawer\"],\n    params,\n  });\n\n  const [contextValue, setContextValue] = useState({\n    state,\n    dispatch,\n  });\n\n  // Update context value and trigger re-render\n  // This patterns avoids unnecessary deep renders\n  // https://reactjs.org/docs/context.html#caveats\n  useEffect(() => {\n    setContextValue({ ...contextValue, state });\n  }, [state]);\n\n  return (\n    <UpStampsContext.Provider value={contextValue}>\n      {children}\n    </UpStampsContext.Provider>\n  );\n};\n","import React, { Fragment, useContext } from \"react\";\nimport { UpStampsContext } from \"./Context\";\n\nexport interface FlagProps {\n  children: React.ReactNode;\n  name: string;\n}\n\nexport const Flag: React.FC<FlagProps> = ({ children, name }) => {\n  const { state } = useContext(UpStampsContext);\n  const show = state.flags.indexOf(name) !== -1;\n\n  //Hide the feature\n  if (!show) return null;\n\n  return <Fragment>{children}</Fragment>;\n};\n","import { useContext } from \"react\";\nimport { UpStampsContext } from \"./Context\";\n\nexport const useFlag = (name: string) => {\n  const { state } = useContext(UpStampsContext);\n\n  return {\n    show: state.flags.indexOf(name) !== -1,\n  } as const;\n};\n"],"names":["UpStampsContext","createContext","_a","children","name","flags","indexOf","React","Fragment","_b","clientId","stage","projectId","state","_c","contextValue","setContextValue","useEffect","Provider","value","show"],"mappings":"uKAsBaA,EAAkBC,gBAC7B,iBCfuC,SAACC,OAAEC,aAAUC,gBAER,0BAAzBC,MAAMC,QAAQF,GAK1BG,gBAACC,gBAAUL,GAFA,yDDa6C,SAACD,OAChEC,aAWMM,0EANS,CACbC,oBACAC,cACAC,yBAGKC,OAMDC,sCAACC,OAAcC,cAQrBC,aAAU,WACRD,2BAAqBD,IAAcF,aAClC,CAACA,IAGFN,gBAACP,EAAgBkB,UAASC,MAAOJ,GAC9BZ,oBEvDgB,SAACC,SAGf,CACLgB,MAAqC,0BAAzBf,MAAMC,QAAQF"}